{% extends 'shorturlsapp/base.html' %}

{% block title %}Pond Meters{% endblock %}
{% load humanize %}
{% block main_title %}Pond Meters{% endblock %}
{% block content %}
{% load pondtemp_filter %}

{% include 'shorturlsapp/pagination.html' with pagination=pagination.pagination %}

<div class="columns is-multiline">
    {% for picture in pictures %}
    <div class="column is-2">
        <div class="card">
            <div class="card-image">
                <figure class="image is-3by2">


                    <img src="{{picture.imgpath}}" alt="" date="{{picture.date}}" class="js-modal-trigger"
                         data-target="modal-js-example">

                </figure>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

{% include 'shorturlsapp/pagination.html' with pagination=pagination.pagination %}

{% endblock %}

{% block scripts %}
<div id="modal-js-example" class="modal">
    <div class="modal-background"></div>

    <div class="modal-content">
        <div class="box">

            <p class="image is-4by3">
                <img src="https://bulma.io/images/placeholders/1280x960.png" alt="">
            </p>
        </div>
        <button class="modal-close is-large" aria-label="close"></button>

    </div>

    <button class="modal-close is-large" aria-label="close"></button>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // Functions to open and close a modal
        function openModal($el, src) {
            $el.classList.add('is-active');
            $el.getElementsByTagName('img')[0].setAttribute('src', src)

        }

        function closeModal($el) {
            $el.classList.remove('is-active');
        }

        function closeAllModals() {
            (document.querySelectorAll('.modal') || []).forEach(($modal) => {
                closeModal($modal);
            });
        }

        // Add a click event on buttons to open a specific modal
        (document.querySelectorAll('.js-modal-trigger') || []).forEach(($trigger) => {
            const modal = $trigger.dataset.target;
            const $target = document.getElementById(modal);
            $trigger.addEventListener('click', (e) => {
                openModal($target, e.target.src);
            });
        });

        // Add a click event on various child elements to close the parent modal
        (document.querySelectorAll('.modal-background, .modal-close, .modal-card-head .delete, .modal-card-foot .button') || []).forEach(($close) => {
            const $target = $close.closest('.modal');

            $close.addEventListener('click', () => {
                closeModal($target);
            });
        });

        // Add a keyboard event to close all modals
        document.addEventListener('keydown', (event) => {
            const e = event || window.event;
            if (e.keyCode === 27) { // Escape key
                closeAllModals();
            }
        });
    });
</script>
{% endblock %}